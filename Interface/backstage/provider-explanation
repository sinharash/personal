---

## How Context Works (Simple Explanation)

Think of React Context like a **broadcast system**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Provider (the radio station)                       â”‚
â”‚  - Holds the data                                   â”‚
â”‚  - Broadcasts it to anyone listening               â”‚
â”‚                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚  Component A                                â”‚  â”‚
â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚    â”‚    â”‚  Component B                        â”‚  â”‚  â”‚
â”‚    â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚    â”‚    â”‚    â”‚  Component C                â”‚  â”‚  â”‚  â”‚
â”‚    â”‚    â”‚    â”‚  useContext() â† receives!   â”‚  â”‚  â”‚  â”‚
â”‚    â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

without Provider
// âŒ Error: "useBusinessAppContext must be used within a BusinessAppProvider"
function MyComponent() {
  const { businessAppData } = useBusinessAppContext() // ğŸ’¥ No one is broadcasting!
}

with Provider
// âœ… Works!
<BusinessAppProvider>        {/* ğŸ“¡ Broadcasting data */}
  <MyComponent />            {/* ğŸ“» Can receive data */}
</BusinessAppProvider>

What BusinessAppProvider Does
function BusinessAppProvider({ children }) {
  // 1. Gets entity from Backstage's EntityPage context
  const { entity } = useEntity()
  
  // 2. Extracts the solma-id annotation
  const id = String(entity.metadata?.annotations?.['solma-id'])
  
  // 3. Fetches business application data (includes permissionLevels)
  const { data } = useSuspenseQuery(businessAppQueryOptions({ id }))
  
  // 4. Provides this data to all children
  return (
    <BusinessAppContext.Provider value={{ businessAppData: data }}>
      {children}
    </BusinessAppContext.Provider>
  )
}

What createPermissionChecker Does
Looking at the usage, it likely returns an object with helper methods:
const permissions = createPermissionChecker(permissionLevels)

// permissionLevels probably looks like:
// ['OWNER', 'ADMIN', 'VIEWER'] or similar

permissions.hasRole('OWNER')  // true if user is owner
permissions.hasRole('ADMIN')  // true if user is admin
```

---

## Final Provider Stack

Your delete card now has this provider structure:
```
QueryClientProvider          â† For React Query (useQuery)
  â””â”€â”€ BusinessAppProvider    â† For business app data & permissions
        â””â”€â”€ ExampleDeleteCardContent
              â”œâ”€â”€ useDeprovisionResource()     â† uses useQuery
              â””â”€â”€ useBusinessAppContext()      â† gets permissions